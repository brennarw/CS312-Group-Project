<main>
<h1 class="no-print">Color Coordinate</h1>
<form (ngSubmit)="formSubmit()" #form="ngForm" class="no-print">
    <div class="form">
    <label for="rows">Number of Rows:</label><input 
        type="number"
        id="rows"
        name="rows"
        class="form-control"
        [max]="1000"
        [min]="1"
        required 
        [(ngModel)]="numRows"
        #rows="ngModel">
    
    <label for="cols">Number of Columns:</label><input 
        type="number" 
        id="cols" 
        name="cols" 
        class="form-control" 
        [max]="702"
        [min]="1"
        required 
        #cols="ngModel"
        [(ngModel)]="numCols">

    <label for="colors">Number of Colors:</label><input 
    type="number" 
    id="colors" 
    name="colors" 
    class="form-control" 
    [max]="10"
    [min]="1"
    required 
    #colors="ngModel"
    [(ngModel)]="numColors">

    <div class="submit"><input type="submit" [disabled]="form.invalid" class="button"></div>

    </div>

    <div *ngIf="rows.invalid && (rows.touched)">
        <div *ngIf="rows.hasError('max') || rows.hasError('min')" class="error">
            *Rows must be at least 1 or at most 1000.
      </div>
      <div *ngIf="rows.hasError('required')" class="error">
          *Rows field is required.
    </div>
  </div>

    <div *ngIf="cols.invalid && (cols.touched)">
        <div *ngIf="cols.hasError('max') || cols.hasError('min')" class="error">
            *Columns must be at least 1 or at most 702.
      </div>
      <div *ngIf="cols.hasError('required')" class="error">
          *Columns field is required.
    </div>
  </div>

    <div *ngIf="colors.invalid && (colors.touched)">
        <div *ngIf="colors.hasError('max') || colors.hasError('min')" class="error">
            *Colors must be at least 1 or at most 10.
      </div>
      <div *ngIf="colors.hasError('required')" class="error">
          *Colors field is required.
    </div>
  </div>
</form>


<div class="table-top" *ngIf="showColorTable && !print">
    <table id="colorTable" >
        @for (color of usedColors; track color) {
            <tr>
              <td style="width: 20%; vertical-align: top;">
                  <mat-radio-group [(ngModel)]="selectedColor">
                    <mat-radio-button 
                      class="example-radio-button" 
                      [value]="color">
                    </mat-radio-button>
                  </mat-radio-group>
             
                  <mat-form-field style="max-width: 120px; font-size: 12px;">
                    <mat-select [value]="color" name="color">
                      @for (colorDropDown of colorSelection; track colorDropDown) {
                        <mat-option [value]="colorDropDown.value">
                          {{ colorDropDown.viewValue }}
                        </mat-option>
                      }
                    </mat-select>
                  </mat-form-field>
              </td>
              <td style="width: 80%; vertical-align: top;">
                <!-- track what cells coordinate with each color here -->
              </td>
            </tr>
        }
    </table>
</div>

<div *ngIf="print">
    <table>
        @for (selected of usedColors; track selected) {
        <tr>
            <td style="width: 20%; vertical-align: top;">
            {{ selected }}
            </td>
            <td style="width: 80%; vertical-align: top;">
            <!-- Insert whatever corresponds to the selected color -->
            </td>
        </tr>
        }
    </table>
</div>

<paint-table *ngIf="showPaintTable" [numRows]="numRows" [numCols]="numCols" [selectedColor]="selectedColor"></paint-table>

<div class="no-print">
    <button class='print-button' (click)="printPage()">Print Coloring Page</button>
</div>

</main>

